{% extends 'carhub/base.html' %}

{% block title %}Sales Report{% endblock %}

{% block content %}
    <h2>Sales Report</h2>
    <p class="subtitle">Table of sales records!</p>
    <div class="d-flex justify-content-end mb-4"> {# Added mb-4 for spacing #}
        <a href="{% url 'export-sales-report-csv' %}" class="btn btn-success">Export to CSV</a>
        {# Kept as btn-success #}
    </div>

    <div class="table-responsive"> {# Makes table scrollable on small screens #}
        <table class="table table-striped table-bordered table-hover mt-3"> {# Added table-hover #}
            <thead class="thead-dark"> {# Kept the dark header #}
            <tr>
                <th>Sale ID</th>
                <th>Customer Name</th>
                <th>Car Brand / Model</th>
                <th>Sale Price ($)</th>
                <th>Order ID</th>
                <th>Sale Date</th>
            </tr>
            </thead>
            <tbody>
            {% for report in sales_reports %}
                <tr>
                    <td>{{ report.display_id }}</td>
                    <td>{{ report.order.customer.username }}</td>
                    <td>{{ report.car.brand }} / {{ report.car.model }}</td>
                    <td>${{ report.sale_price|floatformat:2 }}</td>
                    {# Formatted as currency #}
                    <td>{{ report.order.display_id }}</td>
                    <td>{{ report.sold_on|date:"M d, Y H:i" }}</td>
                    {# Consistent date/time format #}
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6" class="text-center py-4">No sales records available.</td>
                    {# Added py-4 for spacing #}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div> {# End table-responsive #}

    {# Assuming no pagination is needed for this page. If it is, you can add it here #}
    {# using the Bootstrap pagination structure from order_list.html. #}

{% endblock %}